import{defaultClientConfig as e}from"./configuration/defaultClientConfig.mjs";import{toCustomLoginMethodConfig as n}from"./configuration/login-methods.mjs";import{toWalletListConfig as o}from"./configuration/wallets.mjs";import{DEFAULT_SUPPORTED_CHAINS as t}from"./connectors/chains/index.mjs";import{mainnet as a}from"./connectors/chains/mainnet.mjs";import{addPrivyRpcToChain as l}from"./connectors/chains/utils.mjs";import{SOLANA_MAINNET_RPC_URL as i,SOLANA_TESTNET_RPC_URL as s,SOLANA_DEVNET_RPC_URL as r}from"./lib/solana/index.mjs";import{generatePalette as c}from"./theme.mjs";import"./constants.mjs";import"./connectors/chains/arbitrum.mjs";import"./connectors/chains/arbitrumSepolia.mjs";import"./connectors/chains/avalanche.mjs";import"./connectors/chains/avalancheFuji.mjs";import"./connectors/chains/base.mjs";import"./connectors/chains/baseSepolia.mjs";import"./connectors/chains/berachainArtio.mjs";import"./connectors/chains/celo.mjs";import"./connectors/chains/celoAlfajores.mjs";import"./connectors/chains/filecoin.mjs";import"./connectors/chains/filecoinCalibration.mjs";import"./connectors/chains/garnetHolesky.mjs";import"./connectors/chains/holesky.mjs";import"./connectors/chains/linea.mjs";import"./connectors/chains/lineaTestnet.mjs";import"./connectors/chains/lukso.mjs";import"./connectors/chains/optimism.mjs";import"./connectors/chains/optimismSepolia.mjs";import"./connectors/chains/polygon.mjs";import"./connectors/chains/polygonAmoy.mjs";import"./connectors/chains/redstone.mjs";import"./connectors/chains/sepolia.mjs";import"./connectors/chains/zora.mjs";import"./connectors/chains/zoraSepolia.mjs";import"./connectors/chains/zoraTestnet.mjs";import"tinycolor2";function d(t,a,l){let d,h,m,u,g,f,C,y,b,w,A,j,W,M,O,v=l?console.warn:()=>{};a?.loginMethods?(d=a.loginMethods.includes("email"),h=a.loginMethods.includes("sms"),u=a.loginMethods.includes("wallet"),g=a.loginMethods.includes("google"),f=a.loginMethods.includes("twitter"),C=a.loginMethods.includes("discord"),b=a.loginMethods.includes("spotify"),w=a.loginMethods.includes("instagram"),y=a.loginMethods.includes("tiktok"),j=a.loginMethods.includes("github"),A=a.loginMethods.includes("linkedin"),W=a.loginMethods.includes("apple"),M=a.loginMethods.includes("farcaster"),O=a.loginMethods.includes("telegram")):(d=t.emailAuth,h=t.smsAuth,u=t.walletAuth||t.solanaWalletAuth,g=t.googleOAuth,f=t.twitterOAuth,C=t.discordOAuth,j=t.githubOAuth,b=t.spotifyOAuth,w=t.instagramOAuth,y=t.tiktokOAuth,A=t.linkedinOAuth,W=t.appleOAuth,M=t.farcasterAuth,O=t.telegramAuth),"undefined"!=typeof window&&"function"!=typeof window.PublicKeyCredential?m=!1:t.passkeyAuth&&(m=!0);let U=[d,h].filter(Boolean),k=[g,f,C,j,b,w,y,A,W,M,O].filter(Boolean),x=[u].filter(Boolean);if(U.length+k.length+x.length===0)throw Error("You must enable at least one login method");let P=void 0!==a?.appearance?.showWalletLoginFirst?a?.appearance?.showWalletLoginFirst:t.showWalletLoginFirst;P&&0===x.length?(v("You should only enable `showWalletLoginFirst` when `wallet` logins are also enabled. `showWalletLoginFirst` has been set to false"),P=!1):P||k.length+U.length!==0||(v("You should only disable `showWalletLoginFirst` when `email`, `sms`, or social logins are also enabled. `showWalletLoginFirst` has been set to true"),P=!0);let S=a?.externalWallets?.walletConnect?.enabled??!0;a?.loginMethods&&a.loginMethodsAndOrder&&v("You should only configure one of `loginMethods` or `loginMethodsAndOrder`");let F=o({input:a?.appearance?.walletList,overrides:a?.loginMethodsAndOrder}),L=n({input:a?.loginMethodsAndOrder}),E=a?.intl?.defaultCountry??"US",{chains:T,defaultChain:I}=p({supportedChains:a?.supportedChains,defaultChainFromConfig:a?.defaultChain}),q=!!a?.defaultChain,D=a?.customAuth?.getCustomAccessToken&&!1!==a?.customAuth?.enabled,{requireUserPasswordOnCreate:R,...H}=a?.embeddedWallets??{},Y=a?.solanaClusters??[];return t.solanaWalletAuth&&!a?.externalWallets?.solana?.connectors&&console.warn("App configuration has Solana wallet login enabled, but no Solana wallet connectors have been passed to Privy. Make sure to pass Solana connectors to the `config.externalWallets.solana.connectors` field of the `PrivyProvider`"),{id:t.id,name:t.name,allowlistConfig:t.allowlistConfig,legacyWalletUiConfig:t.legacyWalletUiConfig,appearance:{logo:a?.appearance?.logo??t.logoUrl,landingHeader:a?.appearance?.landingHeader??e.appearance.landingHeader,loginMessage:"string"==typeof a?.appearance?.loginMessage?a?.appearance?.loginMessage.slice(0,100):a?.appearance?.loginMessage,footerLogo:a?.appearance?.footerLogo,palette:c({backgroundTheme:a?.appearance?.theme??e.appearance.theme,accentHex:a?.appearance?.accentColor??t.accentColor??e.appearance.accentColor}),loginGroupPriority:P?"web3-first":"web2-first",hideDirectWeb2Inputs:!!a?.appearance?.hideDirectWeb2Inputs,walletList:F,walletChainType:a?.appearance?.walletChainType??(({evmWalletAuth:e,solanaWalletAuth:n})=>e&&n?"ethereum-and-solana":e?"ethereum-only":n?"solana-only":"ethereum-only")({evmWalletAuth:t.walletAuth??!1,solanaWalletAuth:t.solanaWalletAuth??!1})},loginMethods:{wallet:u,email:d,sms:h,passkey:m,google:g,twitter:f,discord:C,github:j,spotify:b,instagram:w,tiktok:y,linkedin:A,apple:W,farcaster:M,telegram:O},disablePlusEmails:t.disablePlusEmails,loginMethodsAndOrder:L,legal:{termsAndConditionsUrl:a?.legal?.termsAndConditionsUrl??t.termsAndConditionsUrl,privacyPolicyUrl:a?.legal?.privacyPolicyUrl??t.privacyPolicyUrl,requireUsersAcceptTerms:t.requireUsersAcceptTerms??!1},walletConnectCloudProjectId:a?.walletConnectCloudProjectId??t.walletConnectCloudProjectId??e.walletConnectCloudProjectId,rpcConfig:{rpcUrls:{},rpcTimeouts:{}},chains:T,solanaClusters:{"mainnet-beta":Y.find((e=>"mainnet-beta"===e.name))?.rpcUrl||i,testnet:Y.find((e=>"testnet"===e.name))?.rpcUrl||s,devnet:Y.find((e=>"devnet"===e.name))?.rpcUrl||r},defaultChain:I,intl:{defaultCountry:E},shouldEnforceDefaultChainOnConnect:q,captchaEnabled:t.captchaEnabled??e.captchaEnabled,captchaSiteKey:t.captchaSiteKey,externalWallets:{coinbaseWallet:{connectionOptions:a?.externalWallets?.coinbaseWallet?.connectionOptions??e.externalWallets.coinbaseWallet.connectionOptions},walletConnect:{enabled:S},solana:{connectors:a?.externalWallets?.solana?.connectors}},embeddedWallets:{...t.embeddedWalletConfig,..."boolean"==typeof R?{requireUserOwnedRecoveryOnCreate:R}:{},...D?{createOnLogin:"all-users",requireUserOwnedRecoveryOnCreate:!1,userOwnedRecoveryOptions:["user-passcode"]}:{},priceDisplay:{primary:"fiat-currency",secondary:"native-token"},...H,showWalletUIs:a?.embeddedWallets?.showWalletUIs??t.enforceWalletUis??!0,extendedCalldataDecoding:a?.embeddedWallets?.extendedCalldataDecoding},mfa:{methods:t.mfaMethods??[],noPromptOnMfaRequired:a?.mfa?.noPromptOnMfaRequired??!1},customAuth:D?{enabled:!0,...a.customAuth}:void 0,loginConfig:{telegramAuthConfiguration:t.telegramAuthConfiguration,passkeysForSignupEnabled:t.passkeysForSignupEnabled},headless:!!a?.headless,render:{standalone:a?._render?.standalone??e._render.standalone},fundingConfig:t.fundingConfig,fundingMethodConfig:{...a?.fundingMethodConfig??e.fundingMethodConfig,moonpay:{...a?.fundingMethodConfig?.moonpay??e.fundingMethodConfig.moonpay,useSandbox:a?.fundingMethodConfig?.moonpay.useSandbox??a?.fiatOnRamp?.useSandbox??e.fundingMethodConfig.moonpay.useSandbox}}}}function h(e){if(!e)return{};let{appearance:n,supportedChains:o,defaultChain:t,externalWallets:a,...l}=e;return{...l,...o?{supportedChains:o.map((e=>e.id))}:void 0,...t?{defaultChain:t.id}:void 0,...a?{walletConnect:a.walletConnect,coinbaseWallet:a.coinbaseWallet,solana:{connectors:a.solana?.connectors?.get().map((e=>e.walletClientType))}}:void 0}}function p({supportedChains:e,defaultChainFromConfig:n}){let o;if(e){if(0===e.length)throw Error("`supportedChains` must contain at least one chain");o=e.map((e=>{if(e.rpcUrls.privyWalletOverride)return e;let n=t.find((n=>n.id===e.id)),o=n?.rpcUrls.privy?.http[0];return o?l(e,o):e}))}else o=[...t];let i=e?o[0]:a,s=n??i;if(!o.find((e=>e.id===s.id)))throw Error("`defaultChain` must be included in `supportedChains`");return{chains:o,defaultChain:s}}export{p as buildChainsAndDefaultChain,d as generateAppConfig,h as generateClientConfigAnalyticsPayload};
